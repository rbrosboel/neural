/*!
 * neural v1.0.0
 * MIT Licensed
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("mermaid")):"function"==typeof define&&define.amd?define(["mermaid"],e):"object"==typeof exports?exports.neural=e(require("mermaid")):t.neural=e(t.mermaid)}("undefined"!=typeof self?self:this,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rows=e,this.cols=n,this.data=i||[].concat(a(Array(e))).map(function(t){return[].concat(a(Array(n))).map(function(t){return 0})});["map","mapTwo","each","reduce","add","subtract","multiply","transpose","product","random","max","toArray","toString","p"].forEach(function(e){return r[e]=t[e].bind(null,r)})}return r(t,[{key:"save",value:function(){return{rows:this.rows,cols:this.cols,data:this.data}}}],[{key:"load",value:function(e){return e instanceof t?e:new t(e.rows,e.cols,e.data)}},{key:"fromArray",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if((n=n||e.length)*r!=e.length)throw new Error("Invalid number of values: rows * cols != array.length");return new t(n,r).map(function(t,n,a){return e[n*r+a%r]})}},{key:"toArray",value:function(t){return t.data.reduce(function(t,e){return t.concat(e)},[])}},{key:"map",value:function(e,n){for(var r=new t(e.rows,e.cols),a=0;a<e.rows;a++)for(var i=0;i<e.cols;i++)r.data[a][i]=n(e.data[a][i],a,i);return r}},{key:"mapTwo",value:function(e,n,r){if(n instanceof t&&(e.rows!=n.rows||e.cols!=n.cols))throw new Error("Shapes must be identical");return e.map(function(e,a,i){return r(e,n instanceof t?n.data[a][i]:n,a,i)})}},{key:"each",value:function(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.cols;r++)e(t.data[n][r],n,r);return t}},{key:"reduce",value:function(e,n,r){return t.each(e,function(t,e,a){return r=n(r,t,e,a)}),r}},{key:"add",value:function(e,n){return t.mapTwo(e,n,function(t,e){return t+e})}},{key:"subtract",value:function(e,n){return t.mapTwo(e,n,function(t,e){return t-e})}},{key:"multiply",value:function(e,n){return t.mapTwo(e,n,function(t,e){return t*e})}},{key:"transpose",value:function(e){var n=new t(e.cols,e.rows);return e.each(function(t,e,r){return n.data[r][e]=t}),n}},{key:"product",value:function(e,n){if(e.cols!=n.rows)throw new Error("Columns in x1 must match rows in x2");var r=new t(e.rows,n.cols);return r.each(function(t,a,i){for(var o=0,u=0;u<e.cols;u++)o+=e.data[a][u]*n.data[u][i];r.data[a][i]=o}),r}},{key:"random",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t.map(function(){return e+Math.random()*(n-e)})}},{key:"max",value:function(t){return t.reduce(function(t,e,n,r){return!t||e>t.value?{value:e,row:n,col:r}:t},null)}},{key:"toString",value:function(t){var e="      "+[].concat(a(Array(t.cols))).map(function(t,e){return e.toString().padEnd(9)}).join("")+"\n";return e+=t.data.map(function(t,e){return e.toString().padStart(3)+t.map(function(t){return t.toFixed(4).padStart(9)}).join("")}).join("\n")}},{key:"p",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n?console.log(t.toString(e),n):console.log(t.toString(e)),e}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"identity",get:function(){return{x:function(t){return t},y:function(t){return 1}}}},{key:"sigmoid",get:function(){return{x:function(t){return 1/(1+Math.exp(-t))},y:function(t){return t*(1-t)}}}},{key:"tanh",get:function(){return{x:function(t){return Math.tanh(t)},y:function(t){return 1-t*t}}}},{key:"relu",get:function(){return{x:function(t){return t<0?0:t},y:function(t){return t>0?1:0}}}},{key:"leaky",get:function(){return{x:function(t){return t<0?.01*t:t},y:function(t){return t>0?1:.01}}}},{key:"softplus",get:function(){return{x:function(t){return Math.log(1+Math.exp(t))},z:function(t){return 1/(1+Math.exp(-t))}}}},{key:"sinusoid",get:function(){return{x:function(t){return Math.sin(t)},z:function(t){return Math.cos(t)}}}},{key:"sinc",get:function(){return{x:function(t){return 0===t?1:Math.sin(t)/t},z:function(t){return 0===t?0:Math.cos(t)/t-Math.sin(t)/(t*t)}}}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(1)),o=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,n,a){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var u=e?e.size:1;this.options=r({activationFunction:"tanh",weightRange:[-Math.sqrt(1.55/u),Math.sqrt(1.55/u)]},a),this.size=n,this.weight=(i=new o.default(n,u)).random.apply(i,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.options.weightRange)),this.weightTransposed=this.weight.transpose(),this.bias=new o.default(n,1),this.clear()}return a(t,[{key:"clear",value:function(){return this.output=0,this.activation=0,this.error=0,this.derivative=0,this.gradientCount=0,this.weightGradientSum=new o.default(this.weight.rows,this.weight.cols),this.biasGradientSum=new o.default(this.bias.rows,this.bias.cols),this.activationFunctions=i.default[this.options.activationFunction],this}},{key:"save",value:function(){return{size:this.size,options:this.options,weight:this.weight.save(),bias:this.bias.save()}}},{key:"feedforward",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e?(this.output=this.weight.product(t).add(this.bias),this.activation=this.output.map(this.activationFunctions.x)):(this.output=t,this.activation=t),this.activation}},{key:"backpropagate",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!e)return t;this.activationFunctions.z?this.derivative=t.multiply(this.output.map(this.activationFunctions.z)):this.derivative=t.multiply(this.activation.map(this.activationFunctions.y));var a=this.derivative.multiply(-r.learningRate),i=a.product(e.activation.transpose());return this.gradientCount++,this.weightGradientSum=this.weightGradientSum.add(i),this.biasGradientSum=this.biasGradientSum.add(a),this.weightTransposed.product(this.derivative)}},{key:"adjust",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=void 0;n=this.weightGradientSum.multiply(1/this.gradientCount),this.weight=this.weight.add(n),this.weightTransposed=this.weight.transpose(),n=this.biasGradientSum.multiply(1/this.gradientCount),this.bias=this.bias.add(n),this.clear()}}}],[{key:"load",value:function(e){if(e instanceof t)return e;var n=new t(null,e.size,e.options);return n.size=e.size,n.weight=o.default.load(e.weight),n.weightTransposed=n.weight.transpose(),n.bias=o.default.load(e.bias),n.options=e.options,n.clear(),n}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),u=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=a({gridInterval:.1,maxScaleX:3,max:1,autoMax:!0},r),this.max=this.options.max,this.series={},this.props=(0,u.default)(e,this),this.start=function(){return n.props.start()},this.stop=function(){return n.props.stop()},this.draw=function(){return n.props.draw()}}return i(t,[{key:"addSerie",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.props.context.font="13px sans-serif";var n=this.props.context.measureText(t).width,r=a({name:t,data:[],color:"0, 0, 0",labelWidth:n},this.options,e);return this.series[t]=r,this}},{key:"addDatapoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this.options.autoMax&&(this.max=Math.max(this.max,t)),this.series[e]||this.addSerie(e);var n=this.series[e];n.data.push(t);var r=this.props.canvas.width;Math.max(r,n.data.length)/r>this.options.maxScaleX&&n.data.shift()}},{key:"mouseWheel",value:function(t){var e=t.event;e.preventDefault();var n=e.deltaY>0?1.1:.9;this.max=Math.max(this.max*n,.1),this.draw()}},{key:"render",value:function(t){var e=t.canvas,n=t.context,r=t.map;n.clearRect(0,0,e.width,e.height),n.font="13px sans-serif";var a=n.measureText("000.0000").width;if(0!=this.max){var i=Math.max(Math.round(this.max)/20,.05),o=this.max/i;n.strokeStyle="#eee",n.fillStyle="#ccc",n.beginPath();for(var u=0;u<=o;u++){var s=r(u*i,0,this.max,e.height-1,0);if(n.moveTo(0,s),u>0&&u<o){var c=(u*i).toFixed(2),l=n.measureText(c).width,h=e.width/2-l/2,f=s+4;n.clearRect(h,s-1,l,2),n.fillText(c,h,f),n.lineTo(h-4,s),n.moveTo(h+l+4,s)}n.lineTo(e.width,s)}n.stroke()}var d=0;n.fillStyle="#000";var p=!0,v=!1,y=void 0;try{for(var g,m=Object.keys(this.series)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var b=g.value,w=this.series[b],x={x:e.width-w.labelWidth-4-a-4-50-16,y:24+18*d},k={x:e.width-a-4-50-16,y:x.y},S={x:e.width-50-16,y:x.y-6};n.fillText(w.name,x.x,x.y-1),w.data.length&&n.fillText(w.data[w.data.length-1].toFixed(4).padStart(8),k.x,k.y-1),n.strokeStyle="rgb("+w.color+")",n.beginPath(),n.moveTo(S.x,S.y),n.lineTo(S.x+50,S.y),n.moveTo(0,0);for(var E=0;E<w.data.length;E++){var C=r(E,0,Math.max(w.data.length,e.width-1),0,e.width-1),O=r(w.data[E],0,this.max,e.height-1,0);n.lineTo(C,O)}n.stroke(),d++}}catch(t){v=!0,y=t}finally{try{!p&&m.return&&m.return()}finally{if(v)throw y}}}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.getElementById(t);if(!n)throw new Error("Unknown element #"+t);var a=document.createElement("canvas"),i=a.getContext("2d"),o=void 0,u=void 0;function s(){var t=e.options,r=t.height,i=t.width;return a.height=r||n.offsetHeight,a.width=i||n.offsetWidth,o}function c(t){return t=t||performance.now(),o.delta=o.time?t-o.time:0,o.time=t,e.render&&e.render(o),o.running&&window.requestAnimationFrame(c),o}function l(t){return function(n){return e[t]&&e[t](r({},o,{event:n}))}}return document.addEventListener("resize",function(t){s(),e.resize&&e.resize(r({},o,{event:t}))}),document.addEventListener("keydown",l("keyDown")),document.addEventListener("keyup",l("keyUp")),a.addEventListener("mousedown",l("mouseDown")),a.addEventListener("mouseup",l("mouseUp")),a.addEventListener("mousemove",l("mouseMove")),a.addEventListener("mousewheel",l("mouseWheel")),o={scene:e,container:n,canvas:a,context:i,draw:c,start:function(){return o.running=!0,u=window.requestAnimationFrame(c),o},stop:function(){return o.running=!1,window.cancelAnimationFrame(u),o},constrain:function(t,e,n){return Math.max(e,Math.min(n,t))},map:function(t,e,n,r,a){return(t-e)/(n-e)*(a-r)+r}},s(),e.init&&e.init(o),c(),n.appendChild(a),o};var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(1)),a=f(n(7)),i=f(n(2)),o=f(n(0)),u=f(n(8)),s=f(n(3)),c=f(n(9)),l=f(n(10)),h=f(n(12));function f(t){return t&&t.__esModule?t:{default:t}}e.default={ActivationFunctions:r.default,AsyncRunner:a.default,Layer:i.default,Matrix:o.default,NeuralNetwork:u.default,LineGraph:s.default,NetworkProgress:c.default,NetworkFlowChart:l.default,TwoInOneOut:h.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.net=e,e.options.auto=!1,this.options=r({fps:30,progressInterval:1e3},n),this.frameInterval=1e3/this.options.fps,this.iterations=1,this.loopTimeStart=0,this.loopTimeLast=0,this.loopStep=this.loopStep.bind(this)}return a(t,[{key:"start",value:function(){return this.running=!0,this.loopStep(),this}},{key:"stop",value:function(){return this.running=!1,this}},{key:"loopStep",value:function(t){this.now=t,this.loopTimeStart||(this.loopTimeStart=t,this.loopTimeLast=t);var e=t-this.loopTimeLast,n=this.net;if(this.net.canStep()){this.iterations*=e<this.frameInterval?1.1:.9,this.iterations=Math.max(1,this.iterations);for(var r=Math.floor(this.iterations);r--&&n.step(););this.loopProgress(n.training,t,e),this.loopProgress(n.testing,t,e)}this.loopTimeLast=t,this.running&&window.requestAnimationFrame(this.loopStep)}},{key:"loopProgress",value:function(t){this.net.canStepContext(t)&&this.now>(t.progressDeadline||0)&&(t.progressDeadline=this.now+t.progressInterval,t.onProgress&&t.onProgress(t))}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=(o(n(0)),o(n(2)));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r({epochs:0,batchSize:0,learningRate:.03,auto:!0},e),this.training={},this.testing={},this.layers=[],this.layers.map(function(t){return t.clear()})}return a(t,[{key:"save",value:function(){return{options:this.options,layers:this.layers.map(function(t){return t.save()})}}},{key:"addLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=r({},this.options,e);var n=this.layers.length?this.layers[this.layers.length-1]:null,a=new i.default(n,t,e);return this.layers.push(a),this}},{key:"getLayers",value:function(t){return{previous:t>0?this.layers[t-1]:null,current:this.layers[t],next:t<this.layers.length-1?this.layers[t+1]:null}}},{key:"predict",value:function(t){return this.feedforward(t)}},{key:"train",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.startContext(this.training,t,r({backpropagate:!0},e)),this.training.auto)for(;!this.stepContext(this.training).endOfContext;);return this}},{key:"test",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.startContext(this.testing,t,r({epochs:1,backpropagate:!1},e)),this.testing.auto)for(;!this.stepContext(this.testing).endOfContext;);return this}},{key:"step",value:function(){return this.canStepContext(this.testing)?this.stepContext(this.testing):this.canStepContext(this.training)&&this.stepContext(this.training),this.canStep()}},{key:"startContext",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n=r({},this.options,n),Object.assign(t,n),t.ready=!0,t.sample=0,t.sampleCount=e.length,t.samples=e.sort(function(){return.5-Math.random()}),t.evaluation=0,t.batchSize=n.batchSize||t.samples.length,t.batch=0,t.batchEvaluation=0,t.batchError=0,t.batchErrorSum=null,t.batchAccuracy=0,t.batchAccuracyCount=0,t.epoch=0,t.epochEvaluation=0,t.epochError=0,t.epochErrorSum=null,t.epochAccuracy=0,t.epochAccuracyCount=0,t.endOfBatch=!1,t.endOfEpoch=!1,t.endOfContext=!1,t.onStart&&t.onStart(t)}},{key:"stepContext",value:function(t){if(this.canStepContext(t)){var e=t.samples[t.sample],n=this.feedforward(e.input,t),r=e.target.subtract(n).map(function(t){return t*t}),a=null;if(t.backpropagate&&(a=n.subtract(e.target),this.backpropagate(a,t)),t.onEvaluate){var i=t.onEvaluate(t,e,n,r,a);t.batchAccuracyCount+=i,t.epochAccuracyCount+=i}t.sample++,t.evaluation++,t.batchEvaluation++,t.epochEvaluation++,t.batchErrorSum=t.batchErrorSum?t.batchErrorSum.add(r):r,t.epochErrorSum=t.epochErrorSum?t.epochErrorSum.add(r):r,t.endOfEpoch=t.sample===t.sampleCount,t.endOfBatch=t.endOfEpoch||t.sample%t.batchSize==0,t.endOfContext=t.endOfEpoch&&0!=t.epochs&&t.epoch===t.epochs-1,t.endOfBatch&&(t.backpropagate&&this.adjust(t),t.batchError=t.batchErrorSum.reduce(function(e,n){return e+n/t.batchEvaluation},0),t.batchAccuracy=t.batchAccuracyCount/t.batchEvaluation,t.onBatch&&t.onBatch(t),t.batch++,t.batchEvaluation=0,t.batchErrorSum=0,t.batchAccuracyCount=0),t.endOfEpoch&&(t.epochError=t.epochErrorSum.reduce(function(e,n){return e+n/t.epochEvaluation},0),t.epochAccuracy=t.epochAccuracyCount/t.epochEvaluation,t.onEpoch&&t.onEpoch(t),t.epoch++,t.epochEvaluation=0,t.epochErrorSum=0,t.epochAccuracyCount=0,t.sample=0,t.samples.sort(function(){return.5-Math.random()})),t.endOfContext&&t.onComplete&&t.onComplete(t)}return t}},{key:"canStep",value:function(){return this.canStepContext(this.training)||this.canStepContext(this.testing)}},{key:"canStepContext",value:function(t){return t.ready&&!t.endOfContext}},{key:"feedforward",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t,r=0;r<this.layers.length;r++){var a=this.getLayers(r),i=a.previous,o=a.current,u=a.next;n=o.feedforward(n,i,u,e)}return n}},{key:"backpropagate",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.layers.length-1;n>=0;n--){var r=this.getLayers(n),a=r.previous,i=r.current,o=r.next;t=i.backpropagate(t,a,o,e)}return t}},{key:"adjust",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=0;e<this.layers.length;e++){var n=this.getLayers(e),r=n.previous,a=n.current,i=n.next;a.adjust(r,i,t)}}}],[{key:"load",value:function(e){var n=new t(e.options);return n.layers=e.layers.map(function(t){return i.default.load(t)}),n}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),o=(r=i)&&r.__esModule?r:{default:r};var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.net=e,this.container=document.getElementById(n),this.statsContainer=document.createElement("div"),this.statsContainer.id=n+"-stats",this.container.appendChild(this.statsContainer),this.graphContainer=document.createElement("div"),this.graphContainer.id=n+"-graph",this.container.appendChild(this.graphContainer),this.graph=new o.default(this.graphContainer.id).addSerie("Train batch cost",{color:"150, 150, 150"}).addSerie("Train batch error",{color:"150, 150, 255"}).addSerie("Train epoch cost",{color:"0, 0, 0"}).addSerie("Train epoch error",{color:"0, 0, 255"}).addSerie("Test epoch cost",{color:"255, 0, 0"}).addSerie("Test epoch error",{color:"0, 175, 0"})}return a(t,[{key:"step",value:function(){var t=this.graph,e=this.net,n=e.training,r=e.testing,a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return(t||0).toFixed(e)},i=a(n.evaluation/n.sampleCount,2),o=a(n.evaluation/n.batchSize,0),u=a(n.evaluation,0),s=a(n.epochAccuracy),c=a(r.epochAccuracy);this.statsContainer.innerHTML='\n            <ul>\n                <li class="stat training epoch"><div class="name">Epoch</div><div class="value">'+i+'</div></li>\n                <li class="stat training batch"><div class="name">Batch</div><div class="value">'+o+'</div></li>\n                <li class="stat training evaluation"><div class="name">Evaluation</div><div class="value">'+u+'</div></li>\n                <li class="stat training accuracy"><div class="name">Training accuracy</div><div class="value">'+s+'</div></li>\n                <li class="stat testing accuracy"><div class="name">Testing accuracy</div><div class="value">'+c+"</div></li>\n            </ul>\n        ",n.ready&&(t.addDatapoint(n.batchError,"Train batch cost"),t.addDatapoint(1-n.batchAccuracy,"Train batch error"),n.epochError&&(t.addDatapoint(n.epochError,"Train epoch cost"),t.addDatapoint(1-n.epochAccuracy,"Train epoch error"))),r.ready&&r.epochError&&(t.addDatapoint(r.epochError,"Test epoch cost"),t.addDatapoint(1-r.epochAccuracy,"Test epoch error")),t.props.running||t.draw()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(11),u=(r=o)&&r.__esModule?r:{default:r};var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=a({verbose:!1},r),this.container=n&&document.getElementById(n),this.net=e}return i(t,[{key:"render",value:function(){var t=this;this.container.innerHTML="",this.renderSvg(function(e){t.container.innerHTML=e})}},{key:"renderSvg",value:function(t){if(!u.default)throw new Error("Load mermaid to use NetworkGraphVisual");for(var e=function(t){return"#"+(Math.abs(t)<.1?"bbbbbb":t<0?"bb5555":"55bb55")+function(t){return(Math.round(t)<16?"0":"")+Math.round(t).toString(16).substr(-2)}(Math.min(Math.abs(100*t),200)+55)},n=function(t){return Math.min(Math.max(1,Math.abs(5*t)),15)},r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&nbsp;";return(t<0?"":e)+t.toFixed(4)},a=0,i=["graph LR"],o=0;o<this.net.layers.length;o++)for(var s=this.net.getLayers(o),c=s.previous,l=s.current,h=(s.next,c?c.size:l.size),f=0;f<h;f++){if(c)for(var d=0;d<l.size;d++){var p=l.weight.data[d][f],v=l.bias.data[d][0],y=l.gradientCount?l.weightGradientSum.data[d][f]:0,g=l.gradientCount?l.biasGradientSum.data[d][0]:0,m=l.output?l.output.data[d][0]:0,b=l.activation?l.activation.data[d][0]:0,w=l.error?l.error.data[d][0]:0,x=l.derivative?l.derivative.data[d][0]:0,k=r(p," "),S=r(v);this.options.verbose&&(k="W:"+r(p," ")+"<br>^:"+r(y," "),S="<br><br>B:"+r(v)+"<br>^:"+r(g)+"<br><br>O:"+r(m)+"<br>>:"+r(b)+"<br><br>E:"+r(w)+"<br><:"+r(x)),i.push(o-1+""+f+' ---|"'+k+'"| '+o+d+'(("'+S+'"))'),i.push("style "+o+d+" fill:"+e(b)+",stroke:"+e(v)+",stroke-width:"+n(v)),i.push("linkStyle "+a+++" stroke:"+e(p)+",stroke-width:"+n(p))}else{var E=l.activation?l.activation.data[f][0]:0;i.push(o+""+f+'[">:'+r(E)+'"]'),i.push("style "+o+f+" fill:"+e(E)+",stroke:"+e(E))}i.push("")}u.default.mermaidAPI.render("flowChart-svg",i.join("\n"),function(e){e=e.replace("</style><g","</style><style>#flowchart-svg .label{font-family: monospace;}</style><g"),t&&t(e)})}}]),t}();e.default=s},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=o(n(4)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){var r=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={range:[0,1],outputRange:[0,1],minColor:"0, 0, 0",maxColor:"255, 255, 255"},this.net=e,this.steps=10,this.screenSize=200,this.screenStepSize=this.screenSize/this.steps,this.props=(0,a.default)(n,this),this.start=function(){return r.props.start()},this.stop=function(){return r.props.stop()},this.draw=function(){return r.props.draw()}}return r(t,[{key:"init",value:function(t){var e=this,n=t.map;this.input=function(t){return n(t,0,e.steps-1,e.options.range[0],e.options.range[1])},this.output=function(t){return n(t,e.options.outputRange[0],e.options.outputRange[1],0,1)},this.screen=function(t){return n(t,0,e.steps,0,e.screenSize)}}},{key:"render",value:function(t){var e=t.canvas,n=t.context;n.fillStyle="rgb("+this.options.minColor+")",n.fillRect(0,0,e.width,e.height);for(var r=0;r<this.steps;r++)for(var a=0;a<this.steps;a++){var o=this.net.predict(i.default.fromArray([this.input(a),this.input(r)])),u=this.output(o.toArray()[0]);n.fillStyle="rgba("+this.options.maxColor+", "+u+")",n.fillRect(this.screen(a),this.screen(r),this.screenStepSize,this.screenStepSize)}}}]),t}();e.default=u}]).default});
//# sourceMappingURL=neural.min.js.map